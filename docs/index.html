<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nature Remo Web Controller</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/themes/light.css">
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.15.1/cdn/shoelace-autoloader.js"></script>

    <script type="importmap">
    {
        "imports": {
            "axios": "https://cdn.jsdelivr.net/npm/axios@1.13/+esm"
        }
    }
    </script>
    <style>
        main {
            max-width: 920px;
            margin: 24px auto;
            padding: 0 16px;
        }

        .row {
            display: grid;
            gap: 8px;
            margin: 12px 0;
        }

        .row.inline {
            grid-auto-flow: column;
            justify-content: start;
            align-items: center;
            gap: 8px;
        }

        .title-row {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .github-link {
            color: inherit;
            text-decoration: none;
        }

        .github-link sl-icon {
            font-size: 1.5rem;
        }

        .buttons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 8px;
            margin: 8px 0;
        }

        .spinner-container {
            position: relative;
            min-height: 100px;
        }

        sl-spinner {
            display: none;
            position: absolute;
            inset: 0;
            margin: auto;
            font-size: 3rem;
        }

        sl-spinner.loading {
            display: block;
        }
    </style>
</head>

<body>
    <main>
        <div class="title-row">
            <h1>Nature Remo Web Controller</h1>
            <a href="https://github.com/watanabe-kf1983/nremo-web" target="_blank" rel="noopener noreferrer" class="github-link">
                <sl-icon name="github" label="View on GitHub"></sl-icon>
            </a>
        </div>

        <div class="row">
            <span>
                <a href="https://home.nature.global/" target="_blank" rel="noopener noreferrer">home.nature.global</a>で作成した
                Nature API Access token を貼り付けてください。ただし、<b>共有PC</b>で使用した後は必ずクリアしておいてください（ブラウザに残っていると、他人に家電を操作されてしまいます）。
            </span>
            <sl-input id="apiAccessToken" label="Nature API Access token" type="password" clearable
                placeholder="home.nature.global で作成した Nature API Access token を貼り付けてください"></sl-input>
            <span> 　</span>

            <span>エアコン、床暖、などへの操作は未対応です。照明、TV、ユーザ登録したボタン操作のみ対応しています。</span>

        </div>
        <div class="spinner-container">
            <div class="row">
                <sl-button id="scanBtn">家電をスキャン</sl-button>
            </div>

            <div id="userInfo" class="outputs">
            </div>
            <div id="appliancesList" class="outputs">
            </div>

            <sl-alert id="alert" variant="danger" closable>
                <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>
                <strong>エラー</strong>
                <div id="alertMsg"></div>
            </sl-alert>

            <sl-spinner id="spinner"></sl-spinner>
        </div>

    </main>

    <script type="module" src="./main.js"></script>
</body>

</html>